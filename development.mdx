---
title: 'Development'
description: 'Learn how to preview changes locally'
---
In this guide, you will use Python with the Ground API to create the following functions:
  1. upload documents to the RAG
  2. query against the documents to obtain similarity rankings
  3. input the similarity ranking into an LLM to get an answer
So let's get started.

You will need an API key from Ground (get it by following the first 3 steps in [Quickstart](/quickstart)), and an API key from OpenAI.

### 1. Upload documents
First thing, you'll need requests to make API calls.<br />
```
pip install requests
```

Let's create a first file, upload_document.py:

```py upload_document.py
import requests

def upload_document(file_path, token):
    URL = "https://platform.ground.dev/api/documents"
    
    with open(file_path, 'rb') as file:
        files = {'document': file}
        headers = {
            'Authorization': f'Bearer {token}'
        }
        
        response = requests.post(URL, headers=headers, files=files)
    
    # Check if the upload was successful
    if response.status_code == 200:
        print("File uploaded successfully.")
        print("Response:", response.text)
    else:
        print("Failed to upload file.")
        print("Status Code:", response.status_code)
        print("Response:", response.text)

if __name__ == "__main__":
    FILE_PATH = "path/to/file"
    TOKEN = "your_Ground_api_key"
    
    upload_document(FILE_PATH, TOKEN)
    ```
You're able to upload most kind of text documents to Ground.<br />
They will be [embedded](https://www.elastic.co/what-is/word-embedding) and saved on our platform.

### 2. Get the RAG ranking
Now that you can upload files, let's query information from them!
For this part, let's use OpenAI (you can replace by whatever model you want).
```
pip install openai
```

Create a search_documents.py file.<br />
And our first function in this file will use the /search/rrf endpoint from Ground's API.<br />
It will search for matches against your query, in the files you uploaded to our database. And will return a list of answers.

```py search_documents.py
import requests
import json
import openai

def search_rrf(query, token):
    GROUND_URL = "https://platform.ground.dev/api"
    
    headers = {
        'Authorization': f'Bearer {token}'
    }
    params = {
        'query': query
    }
    
    search_url = GROUND_URL + "/search/rrf"
    response = requests.get(search_url, headers=headers, params=params)
    
    # Check if the request was successful
    if response.status_code == 200:
        try:
            return response.text
        except ValueError:
            print("Error: Response is not in JSON format.")
    else:
        print("Failed to perform search.")
        print("Status Code:", response.status_code)
        print("Response:", response.text)
```

### 3. Pass the rankings in OpenAI
Now that Ground did it's job, and you have a ranked list with results, let's input this list into ChatGPT 3.5 and let it come up with a nicely formatted answer.


```py search_documents.py
def answer_with_ranking(rag_rankings, query):
    client = openai.OpenAI(
        api_key="your_OpenAI_api_key"
    )
    # Call OpenAI's API with the prompts
    response = client.chat.completions.create(
        model="gpt-3.5-turbo",
        messages=[
            {"role": "system", "content": f"Use the following information to answer the query: '{rag_rankings}'\n\n"},
            {"role": "system", "content": "Answer the query and cite the parent_document_key at the end of the answer."},
            {"role": "user", "content": f"'{query}'\n\n"},
        ],
        max_tokens=200,  # Adjust as needed
        n=1,
        stop=None,
        temperature=0.8
    )
    
    # Extract the generated answer
    return response.choices[0].message.content

if __name__ == "__main__":
    # Example query and token
    query = "put_your_question_here"
    GROUND_API_KEY = "your_Ground_api_key"
    
    # Call the search function and turn the JSON answer into an object
    rag_rankings = json.loads(search_rrf(query, GROUND_API_KEY))

    answer = answer_with_ranking(rag_rankings, query)
    print(answer)
```
